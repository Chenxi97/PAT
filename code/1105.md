---
title: 1105. Spiral Matrix (25)
date: 2018-2-19 15:00:07
tags: 
	- PAT
categories: PAT甲级题解
---

This time your job is to fill a sequence of N positive integers into a spiral matrix in non-increasing order. A spiral matrix is filled in from the first element at the upper-left corner, then move in a clockwise spiral. The matrix has m rows and n columns, where m and n satisfy the following: m*n must be equal to N; m>=n; and m-n is the minimum of all the possible values.

#### Input Specification:

Each input file contains one test case. For each case, the first line gives a positive integer N. Then the next line contains N positive integers to be filled into the spiral matrix. All the numbers are no more than 104. The numbers in a line are separated by spaces.

#### Output Specification:

For each test case, output the resulting matrix in m lines, each contains n numbers. There must be exactly 1 space between two adjacent numbers, and no extra space at the end of each line.

#### Sample Input:
12
37 76 20 98 76 42 53 95 60 81 58 93
#### Sample Output:
98 95 93
42 37 81
53 20 76
58 60 76

***

```
#include<cstdio>
#include<cmath>
#include<algorithm>
using namespace std;
#define MAX 10010
int m[MAX][MAX],a[MAX],col,row,ct=0;
bool flag[MAX][MAX]={0};
int rl[4]={0,0,-1,1};//左右
int ud[4]={1,-1,0,0};//上下
bool cmp(int a,int b){
    return a>b;
}
int direct(int c,int r,int before){
    int newr=r+rl[before],newc=c+ud[before];//新坐标
    if(newr<row&&newr>=0&&newc<col&&newc>=0&&flag[newr][newc]==false)//按照当前方向是否可行
        return before;
    for(int i=0;i<4;i++){//改变方向
        newr=r+rl[i],newc=c+ud[i];
        if(newr<row&&newr>=0&&newc<col&&newc>=0&&flag[newr][newc]==false)
            return i;
    }
    return -1;//四个方向都不可行说明到达终点
}
void sp(int c,int r,int n){
    m[r][c]=a[ct++];
    flag[r][c]=true;
    int d=direct(c,r,n);
    if(d==-1) return;
    else sp(c+ud[d],r+rl[d],d);
}
int main()
{
    int n;
    scanf("%d",&n);
    for(int i=0;i<n;i++)
        scanf("%d",&a[i]);
    col=pow(n,0.5);
    while(col!=0&&n%col!=0)
        col--;
    row=n/col;
    sort(a,a+n,cmp);
    sp(0,0,0);
    for(int i=0;i<row;i++){
        for(int j=0;j<col;j++){
            printf("%d",m[i][j]);
            if(j<col-1) printf(" ");
        }
        printf("\n");
    }
    return 0;
}
```